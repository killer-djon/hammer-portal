var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}(function(){var l=0,e=[],j={},i={},g={'<':'lt','>':'gt','&':'amp','"':'quot',"'":'#39'},m=/[<>&\"\']/g,c,f=window.setTimeout,d={},b;function h(){this.returnValue=!1}function k(){this.cancelBubble=!0}(function(e){var c=e.split(/,/),a,b,d;for(a=0;a<c.length;a+=2){d=c[a+1].split(/ /);for(b=0;b<d.length;b++){i[d[b]]=c[a]}}})('application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe');var a={VERSION:'1.5.7',STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:i,ua:function(){var d=navigator,b=d.userAgent,f=d.vendor,a,c,e;a=/WebKit/.test(b);e=a&&f.indexOf('Apple')!==-1;c=window.opera&&window.opera.buildNumber;return {windows:navigator.platform.indexOf('Win')!==-1,android:/Android/.test(b),ie:!a&&!c&&/MSIE/gi.test(b)&&/Explorer/gi.test(d.appName),webkit:a,gecko:!a&&/Gecko/.test(b),safari:e,opera:!!c}}(),typeOf:function(a){return {}.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},extend:function(b){a.each(arguments,function(c,d){if(d>0){a.each(c,function(e,a){b[a]=e})}});return b},cleanName:function(a){var b,c;c=[/[\300-\306]/g,'A',/[\340-\346]/g,'a',/\307/g,'C',/\347/g,'c',/[\310-\313]/g,'E',/[\350-\353]/g,'e',/[\314-\317]/g,'I',/[\354-\357]/g,'i',/\321/g,'N',/\361/g,'n',/[\322-\330]/g,'O',/[\362-\370]/g,'o',/[\331-\334]/g,'U',/[\371-\374]/g,'u'];for(b=0;b<c.length;b+=2){a=a.replace(c[b],c[b+1])}a=a.replace(/\s+/g,'_');a=a.replace(/[^a-z0-9_\-\.]+/gi,'');return a},addRuntime:function(b,a){a.name=b;e[b]=a;e.push(a);return a},guid:function(){var c=(new Date()).getTime().toString(32),b;for(b=0;b<5;b++){c+=Math.floor(Math.random()*65535).toString(32)}return (a.guidPrefix||'p')+c+(l++).toString(32)},buildUrl:function(c,d){var b='';a.each(d,function(e,a){b+=(b?'&':'')+encodeURIComponent(a)+'='+encodeURIComponent(e)});if(b){c+=(c.indexOf('?')>0?'&':'?')+b}return c},each:function(a,f){var e,d,b;if(a){e=a.length;if(e===c){for(d in a){if(a.hasOwnProperty(d)){if(f(a[d],d)===!1){return}}}}else {for(b=0;b<e;b++){if(f(a[b],b)===!1){return}}}}},formatSize:function(b){if(b===c||/\D/.test(b)){return a.translate('N/A')}if(b>1073741824){return Math.round(b/1073741824,1)+' GB'}if(b>1048576){return Math.round(b/1048576,1)+' MB'}if(b>1024){return Math.round(b/1024,1)+' KB'}return b+' b'},getPos:function(c,e){var i=0,h=0,b,d=document,f,g;c=c;e=e||d.body;function o(f){var a,b,h=0,g=0;if(f){b=f.getBoundingClientRect();a=d.compatMode==='CSS1Compat'?d.documentElement:d.body;h=b.left+a.scrollLeft;g=b.top+a.scrollTop}return {x:h,y:g}}if(c&&c.getBoundingClientRect&&a.ua.ie&&(!d.documentMode||d.documentMode<8)){f=o(c);g=o(e);return {x:f.x-g.x,y:f.y-g.y}}b=c;while(b&&b!=e&&b.nodeType){i+=b.offsetLeft||0;h+=b.offsetTop||0;b=b.offsetParent}b=c.parentNode;while(b&&b!=e&&b.nodeType){i-=b.scrollLeft||0;h-=b.scrollTop||0;b=b.parentNode}return {x:i,y:h}},getSize:function(a){return {w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}},parseSize:function(a){var b;if(typeof a=='string'){a=/^([0-9]+)([mgk]?)$/.exec(a.toLowerCase().replace(/[^0-9mkg]/g,''));b=a[2];a=+a[1];if(b=='g'){a*=1073741824}if(b=='m'){a*=1048576}if(b=='k'){a*=1024}}return a},xmlEncode:function(a){return a?(''+a).replace(m,function(b){return g[b]?'&'+g[b]+';':b}):a},toArray:function(c){var a,b=[];for(a=0;a<c.length;a++){b[a]=c[a]}return b},inArray:function(c,b){if(b){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(b,c)}for(var a=0,d=b.length;a<d;a++){if(b[a]===c){return a}}}return -1},addI18n:function(b){return a.extend(j,b)},translate:function(a){return j[a]||a},isEmptyObj:function(a){if(a===c){return !0}for(var b in a){return !1}return !0},hasClass:function(b,c){var a;if(b.className==''){return !1}a=new RegExp('(^|\\s+)'+c+'(\\s+|$)');return a.test(b.className)},addClass:function(b,c){if(!a.hasClass(b,c)){b.className=b.className==''?c:b.className.replace(/\s+$/,'')+' '+c}},removeClass:function(a,c){var b=new RegExp('(^|\\s+)'+c+'(\\s+|$)');a.className=a.className.replace(b,function(e,b,d){return b===' '&&d===' '?' ':''})},getStyle:function(a,b){if(a.currentStyle){return a.currentStyle[b]}else {if(window.getComputedStyle){return window.getComputedStyle(a,null)[b]}}},addEvent:function(e,f,j){var g,i,m,l;l=arguments[3];f=f.toLowerCase();if(b===c){b='Plupload_'+a.guid()}if(e.addEventListener){g=j;e.addEventListener(f,g,!1)}else {if(e.attachEvent){g=function(){var a=window.event;if(!a.target){a.target=a.srcElement}a.preventDefault=h;a.stopPropagation=k;j(a)};e.attachEvent('on'+f,g)}}if(e[b]===c){e[b]=a.guid()}if(!d.hasOwnProperty(e[b])){d[e[b]]={}}i=d[e[b]];if(!i.hasOwnProperty(f)){i[f]=[]}i[f].push({func:g,orig:j,key:l})},removeEvent:function(e,h){var f,i,j;if(typeof arguments[2]=='function'){i=arguments[2]}else {j=arguments[2]}h=h.toLowerCase();if(e[b]&&d[e[b]]&&d[e[b]][h]){f=d[e[b]][h]}else {return}for(var g=f.length-1;g>=0;g--){if(f[g].key===j||f[g].orig===i){if(e.removeEventListener){e.removeEventListener(h,f[g].func,!1)}else {if(e.detachEvent){e.detachEvent('on'+h,f[g].func)}}f[g].orig=null;f[g].func=null;f.splice(g,1);if(i!==c){break}}}if(!f.length){delete d[e[b]][h]}if(a.isEmptyObj(d[e[b]])){delete d[e[b]];try{delete e[b]}catch(n){e[b]=c}}},removeAllEvents:function(e){var f=arguments[1];if(e[b]===c||!e[b]){return}a.each(d[e[b]],function(c,b){a.removeEvent(e,b,f)})}};a.Uploader=function(b){var h={},g,d=[],j,i=!1;g=new a.QueueProgress();b=a.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:'file',filters:[]},b);function t(){var e,f=0,c;if(this.state==a.STARTED){for(c=0;c<d.length;c++){if(!e&&d[c].status==a.QUEUED){e=d[c];e.status=a.UPLOADING;if(this.trigger('BeforeUpload',e)){this.trigger('UploadFile',e)}}else {f++}}if(f==d.length){this.stop();this.trigger('UploadComplete',d)}}}function o(){var f,e;g.reset();for(f=0;f<d.length;f++){e=d[f];if(e.size!==c){g.size+=e.size;g.loaded+=e.loaded}else {g.size=c}if(e.status==a.DONE){g.uploaded++}else {if(e.status==a.FAILED){g.failed++}else {g.queued++}}}if(g.size===c){g.percent=d.length>0?Math.ceil(g.uploaded/d.length*100):0}else {g.bytesPerSec=Math.ceil(g.loaded/((+new Date()-j||1)/1000));g.percent=g.size>0?Math.ceil(g.loaded/g.size*100):0}}a.extend(this,{state:a.STOPPED,runtime:'',features:{},files:d,settings:b,total:g,id:a.guid(),init:function(){var g=this,h,i,m,l=0,k;if(typeof b.preinit=='function'){b.preinit(g)}else {a.each(b.preinit,function(c,a){g.bind(a,c)})}b.page_url=b.page_url||document.location.pathname.replace(/\/[^\/]+$/g,'/');if(!/^(\w+:\/\/|\/)/.test(b.url)){b.url=b.page_url+b.url}b.chunk_size=a.parseSize(b.chunk_size);b.max_file_size=a.parseSize(b.max_file_size);g.bind('FilesAdded',function(k,l){var i,e,m=0,h,j=b.filters;if(j&&j.length){h=[];a.each(j,function(c){a.each(c.extensions.split(/,/),function(a){if(/^\s*\*\s*$/.test(a)){h.push('\\.*')}else {h.push('\\.'+a.replace(new RegExp('['+'/^$.*+?|()[]{}\\'.replace(/./g,'\\$&')+']','g'),'\\$&'))}})});h=new RegExp(h.join('|')+'$','i')}for(i=0;i<l.length;i++){e=l[i];e.loaded=0;e.percent=0;e.status=a.QUEUED;if(h&&!h.test(e.name)){k.trigger('Error',{code:a.FILE_EXTENSION_ERROR,message:a.translate('File extension error.'),file:e});continue}if(e.size!==c&&e.size>b.max_file_size){k.trigger('Error',{code:a.FILE_SIZE_ERROR,message:a.translate('File size error.'),file:e});continue}d.push(e);m++}if(m){f(function(){g.trigger('QueueChanged');g.refresh()},1)}else {return !1}});if(b.unique_names){g.bind('UploadFile',function(e,a){var d=a.name.match(/\.([^.]+)$/),c='tmp';if(d){c=d[1]}a.target_name=a.id+'.'+c})}g.bind('UploadProgress',function(c,a){a.percent=a.size>0?Math.ceil(a.loaded/a.size*100):100;o()});g.bind('StateChanged',function(c){if(c.state==a.STARTED){j=+new Date()}else {if(c.state==a.STOPPED){for(h=c.files.length-1;h>=0;h--){if(c.files[h].status==a.UPLOADING){c.files[h].status=a.QUEUED;o()}}}}});g.bind('QueueChanged',o);g.bind('Error',function(d,c){if(c.file){c.file.status=a.FAILED;o();if(d.state==a.STARTED){f(function(){t.call(g)},1)}}});g.bind('FileUploaded',function(d,c){c.status=a.DONE;c.loaded=c.size;d.trigger('UploadProgress',c);f(function(){t.call(g)},1)});if(b.runtimes){i=[];k=b.runtimes.split(/\s?,\s?/);for(h=0;h<k.length;h++){if(e[k[h]]){i.push(e[k[h]])}}}else {i=e}function w(){var d=i[l++],f,c,e;if(d){f=d.getFeatures();c=g.settings.required_features;if(c){c=c.split(',');for(e=0;e<c.length;e++){if(!f[c[e]]){w();return}}}d.init(g,function(a){if(a&&a.success){g.features=f;g.runtime=d.name;g.trigger('Init',{runtime:d.name});g.trigger('PostInit');g.refresh()}else {w()}})}else {g.trigger('Error',{code:a.INIT_ERROR,message:a.translate('Init error.')})}}w();if(typeof b.init=='function'){b.init(g)}else {a.each(b.init,function(c,a){g.bind(a,c)})}},refresh:function(){this.trigger('Refresh')},start:function(){if(d.length&&this.state!=a.STARTED){this.state=a.STARTED;this.trigger('StateChanged');t.call(this)}},stop:function(){if(this.state!=a.STOPPED){this.state=a.STOPPED;this.trigger('CancelUpload');this.trigger('StateChanged')}},disableBrowse:function(){i=arguments[0]!==c?arguments[0]:!0;this.trigger('DisableBrowse',i)},getFile:function(c){var a;for(a=d.length-1;a>=0;a--){if(d[a].id===c){return d[a]}}},removeFile:function(c){var a;for(a=d.length-1;a>=0;a--){if(d[a].id===c.id){return this.splice(a,1)[0]}}},splice:function(f,e){var a;a=d.splice(f===c?0:f,e===c?d.length:e);this.trigger('FilesRemoved',a);this.trigger('QueueChanged');return a},trigger:function(e){var c=h[e.toLowerCase()],a,d;if(c){d=Array.prototype.slice.call(arguments);d[0]=this;for(a=0;a<c.length;a++){if(c[a].func.apply(c[a].scope,d)===!1){return !1}}}return !0},hasEventListener:function(a){return !!h[a.toLowerCase()]},bind:function(a,e,d){var c;a=a.toLowerCase();c=h[a]||[];c.push({func:e,scope:d||this});h[a]=c},unbind:function(e){e=e.toLowerCase();var a=h[e],d,f=arguments[1];if(a){if(f!==c){for(d=a.length-1;d>=0;d--){if(a[d].func===f){a.splice(d,1);break}}}else {a=[]}if(!a.length){delete h[e]}}},unbindAll:function(){var c=this;a.each(h,function(d,a){c.unbind(a)})},destroy:function(){this.stop();this.trigger('Destroy');this.unbindAll()}})};a.File=function(d,b,c){var a=this;a.id=d;a.name=b;a.size=c;a.loaded=0;a.percent=0;a.status=0};a.Runtime=function(){this.getFeatures=function(){};this.init=function(a,b){}};a.QueueProgress=function(){var a=this;a.size=0;a.loaded=0;a.uploaded=0;a.failed=0;a.queued=0;a.percent=0;a.bytesPerSec=0;a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}};a.runtimes={};window.plupload=a})();(function(){if(window.google&&google.gears){return}var a=null;if(typeof GearsFactory!='undefined'){a=new GearsFactory()}else {try{a=new ActiveXObject('Gears.Factory');if(a.getBuildInfo().indexOf('ie_mobile')!=-1){a.privateSetGlobalObject(this)}}catch(b){if(typeof navigator.mimeTypes!='undefined'&&navigator.mimeTypes['application/x-googlegears']){a=document.createElement('object');a.style.display='none';a.width=0;a.height=0;a.type='application/x-googlegears';document.documentElement.appendChild(a)}}}if(!a){return}if(!window.google){window.google={}}if(!google.gears){google.gears={factory:a}}})();(function(e,d,b,f){var c={};function a(h,c,i){var j,a,k,g;a=google.gears.factory.create('beta.canvas');try{a.decode(h);if(!c.width){c.width=a.width}if(!c.height){c.height=a.height}g=Math.min(c.width/a.width,c.height/a.height);if(g<1){a.resize(Math.round(a.width*g),Math.round(a.height*g))}else {if(!c.quality||i!=='image/jpeg'){return h}}if(c.quality){return a.encode(i,{quality:c.quality/100})}return a.encode(i)}catch(l){}return h}b.runtimes.Gears=b.addRuntime('gears',{getFeatures:function(){return {dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(h,k){var i,g,l=!1;if(!e.google||!google.gears){return k({success:!1})}try{i=google.gears.factory.create('beta.desktop')}catch(m){return k({success:!1})}function j(j){var g,a,l=[],i;for(a=0;a<j.length;a++){g=j[a];i=b.guid();c[i]=g.blob;l.push(new b.File(i,g.name,g.blob.length))}h.trigger('FilesAdded',l)}h.bind('PostInit',function(){var a=h.settings,c=d.getElementById(a.drop_element);if(c){b.addEvent(c,'dragover',function(a){i.setDropEffect(a,'copy');a.preventDefault()},h.id);b.addEvent(c,'drop',function(c){var a=i.getDragData(c,'application/x-gears-files');if(a){j(a.files)}c.preventDefault()},h.id);c=0}b.addEvent(d.getElementById(a.browse_button),'click',function(o){var n=[],g,c,m;o.preventDefault();if(l){return}p: for(g=0;g<a.filters.length;g++){m=a.filters[g].extensions.split(',');for(c=0;c<m.length;c++){if(m[c]==='*'){n=[];break p}n.push('.'+m[c])}}i.openFiles(j,{singleFile:!a.multi_selection,filter:n})},h.id)});h.bind('CancelUpload',function(){if(g.abort){g.abort()}});h.bind('UploadFile',function(j,i){var n=0,m,l,r=0,q=j.settings.resize,o;if(q&&/\.(png|jpg|jpeg)$/i.test(i.name)){c[i.id]=a(c[i.id],q,/\.png$/i.test(i.name)?'image/png':'image/jpeg')}i.size=c[i.id].length;l=j.settings.chunk_size;o=l>0;m=Math.ceil(i.size/l);if(!o){l=i.size;m=1}function p(){var q,s=j.settings.multipart,t=0,a={name:i.target_name||i.name},u=j.settings.url;function A(m){var l,o='----pluploadboundary'+b.guid(),n='--',c='\r\n',p,q;if(s){g.setRequestHeader('Content-Type','multipart/form-data; boundary='+o);l=google.gears.factory.create('beta.blobbuilder');b.each(b.extend(a,j.settings.multipart_params),function(g,a){l.append(n+o+c+'Content-Disposition: form-data; name="'+a+'"'+c+c);l.append(g+c)});q=b.mimeTypes[i.name.replace(/^.+\.([^.]+)/,'$1').toLowerCase()]||'application/octet-stream';l.append(n+o+c+'Content-Disposition: form-data; name="'+j.settings.file_data_name+'"; filename="'+i.name+'"'+c+'Content-Type: '+q+c+c);l.append(m);l.append(c+n+o+n+c);p=l.getAsBlob();t=p.length-m.length;m=p}g.send(m)}if(i.status==b.DONE||i.status==b.FAILED||j.state==b.STOPPED){return}if(o){a.chunk=n;a.chunks=m}q=Math.min(l,i.size-n*l);if(!s){u=b.buildUrl(j.settings.url,a)}g=google.gears.factory.create('beta.httprequest');g.open('POST',u);if(!s){g.setRequestHeader('Content-Disposition','attachment; filename="'+i.name+'"');g.setRequestHeader('Content-Type','application/octet-stream')}b.each(j.settings.headers,function(c,a){g.setRequestHeader(a,c)});g.upload.onprogress=function(a){i.loaded=r+a.loaded-t;j.trigger('UploadProgress',i)};g.onreadystatechange=function(){var a;if(g.readyState==4&&j.state!==b.STOPPED){if(g.status==200){a={chunk:n,chunks:m,response:g.responseText,status:g.status};j.trigger('ChunkUploaded',i,a);if(a.cancelled){i.status=b.FAILED;return}r+=q;if(++n>=m){i.status=b.DONE;j.trigger('FileUploaded',i,{response:g.responseText,status:g.status})}else {p()}}else {j.trigger('Error',{code:b.HTTP_ERROR,message:b.translate('HTTP Error.'),file:i,chunk:n,chunks:m,status:g.status})}}};if(n<m){A(c[i.id].slice(n*l,q))}}p()});h.bind('DisableBrowse',function(c,a){l=a});h.bind('Destroy',function(a){var g,c,i={browseButton:a.settings.browse_button,dropElm:a.settings.drop_element};for(g in i){c=d.getElementById(i[g]);if(c){b.removeAllEvents(c,a.id)}}});k({success:!0})}})})(window,document,plupload);(function(h,b,a,g){var e={},d={};function c(e){var d,k=typeof e,j,i,f;if(e===g||e===null){return 'null'}if(k==='string'){d='\bb\tt\nn\ff\rr""\'\'\\\\';return '"'+e.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(c,i){var f=d.indexOf(i);if(f+1){return '\\'+d.charAt(f+1)}c=i.charCodeAt().toString(16);return '\\u'+'0000'.substring(c.length)+c})+'"'}if(k=='object'){j=e.length!==g;d='';if(j){for(i=0;i<e.length;i++){if(d){d+=','}d+=c(e[i])}d='['+d+']'}else {for(f in e){if(e.hasOwnProperty(f)){if(d){d+=','}d+=c(f)+':'+c(e[f])}}d='{'+d+'}'}return d}return ''+e}function f(n){var j=!1,o=null,l=null,e,c,d,i,k,f=0;try{try{l=new ActiveXObject('AgControl.AgControl');if(l.IsVersionSupported(n)){j=!0}l=null}catch(p){var m=navigator.plugins['Silverlight Plug-In'];if(m){e=m.description;if(e==='1.0.30226.2'){e='2.0.30226.2'}c=e.split('.');while(c.length>3){c.pop()}while(c.length<4){c.push(0)}d=n.split('.');while(d.length>4){d.pop()}do{i=parseInt(d[f],10);k=parseInt(c[f],10);f++}while(f<d.length&&i===k);if(i<=k&&!isNaN(i)){j=!0}}}}catch(q){j=!1}return j}a.silverlight={trigger:function(i,f){var d=e[i],j,c;if(d){c=a.toArray(arguments).slice(1);c[0]='Silverlight:'+f;setTimeout(function(){d.trigger.apply(d,c)},0)}}};a.runtimes.Silverlight=a.addRuntime('silverlight',{getFeatures:function(){return {jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(i,p){var k,n='',o=i.settings.filters,l,m=b.body;if(!f('2.0.31005.0')||h.opera&&h.opera.buildNumber){p({success:!1});return}d[i.id]=!1;e[i.id]=i;k=b.createElement('div');k.id=i.id+'_silverlight_container';a.extend(k.style,{position:'absolute',top:'0px',background:i.settings.shim_bgcolor||'transparent',zIndex:99999,width:'100px',height:'100px',overflow:'hidden',opacity:i.settings.shim_bgcolor||b.documentMode>8?'':0.01});k.className='plupload silverlight';if(i.settings.container){m=b.getElementById(i.settings.container);if(a.getStyle(m,'position')==='static'){m.style.position='relative'}}m.appendChild(k);for(l=0;l<o.length;l++){n+=(n!=''?'|':'')+o[l].title+' | *.'+o[l].extensions.replace(/,/g,';*.')}k.innerHTML='<object id="'+i.id+'_silverlight" data="data:application/x-silverlight," type="application/x-silverlight-2" style="outline:none;" width="1024" height="1024"><param name="source" value="'+i.settings.silverlight_xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="id='+i.id+',filter='+n+',multiselect='+i.settings.multi_selection+'"/></object>';function j(){return b.getElementById(i.id+'_silverlight').content.Upload}i.bind('Silverlight:Init',function(){var k,f={};if(d[i.id]){return}d[i.id]=!0;i.bind('Silverlight:StartSelectFiles',function(c){k=[]});i.bind('Silverlight:SelectFile',function(l,d,e,j){var c;c=a.guid();f[c]=d;f[d]=c;k.push(new a.File(c,e,j))});i.bind('Silverlight:SelectSuccessful',function(){if(k.length){i.trigger('FilesAdded',k)}});i.bind('Silverlight:UploadChunkError',function(c,e,j,k,d){i.trigger('Error',{code:a.IO_ERROR,message:'IO Error.',details:d,file:c.getFile(f[e])})});i.bind('Silverlight:UploadFileProgress',function(d,k,e,j){var c=d.getFile(f[k]);if(c.status!=a.FAILED){c.size=j;c.loaded=e;d.trigger('UploadProgress',c)}});i.bind('Refresh',function(d){var c,e,f;c=b.getElementById(d.settings.browse_button);if(c){e=a.getPos(c,b.getElementById(d.settings.container));f=a.getSize(c);a.extend(b.getElementById(d.id+'_silverlight_container').style,{top:e.y+'px',left:e.x+'px',width:f.w+'px',height:f.h+'px'})}});i.bind('Silverlight:UploadChunkSuccessful',function(c,n,e,m,l){var k,d=c.getFile(f[n]);k={chunk:e,chunks:m,response:l};c.trigger('ChunkUploaded',d,k);if(d.status!=a.FAILED&&c.state!==a.STOPPED){j().UploadNextChunk()}if(e==m-1){d.status=a.DONE;c.trigger('FileUploaded',d,{response:l})}});i.bind('Silverlight:UploadSuccessful',function(c,j,e){var d=c.getFile(f[j]);d.status=a.DONE;c.trigger('FileUploaded',d,{response:e})});i.bind('FilesRemoved',function(e,d){var c;for(c=0;c<d.length;c++){j().RemoveFile(f[d[c].id])}});i.bind('UploadFile',function(l,e){var d=l.settings,k=d.resize||{};j().UploadFile(f[e.id],l.settings.url,c({name:e.target_name||e.name,mime:a.mimeTypes[e.name.replace(/^.+\.([^.]+)/,'$1').toLowerCase()]||'application/octet-stream',chunk_size:d.chunk_size,image_width:k.width,image_height:k.height,image_quality:k.quality,multipart:!!d.multipart,multipart_params:d.multipart_params||{},file_data_name:d.file_data_name,headers:d.headers}))});i.bind('CancelUpload',function(){j().CancelUpload()});i.bind('Silverlight:MouseEnter',function(e){var c,d;c=b.getElementById(i.settings.browse_button);d=e.settings.browse_button_hover;if(c&&d){a.addClass(c,d)}});i.bind('Silverlight:MouseLeave',function(e){var c,d;c=b.getElementById(i.settings.browse_button);d=e.settings.browse_button_hover;if(c&&d){a.removeClass(c,d)}});i.bind('Silverlight:MouseLeftButtonDown',function(e){var c,d;c=b.getElementById(i.settings.browse_button);d=e.settings.browse_button_active;if(c&&d){a.addClass(c,d);a.addEvent(b.body,'mouseup',function(){a.removeClass(c,d)})}});i.bind('Sliverlight:StartSelectFiles',function(e){var c,d;c=b.getElementById(i.settings.browse_button);d=e.settings.browse_button_active;if(c&&d){a.removeClass(c,d)}});i.bind('DisableBrowse',function(d,c){j().DisableBrowse(c)});i.bind('Destroy',function(c){var f;a.removeAllEvents(b.body,c.id);delete d[c.id];delete e[c.id];f=b.getElementById(c.id+'_silverlight_container');if(f){f.parentNode.removeChild(f)}});p({success:!0})})}})})(window,document,plupload);(function(g,b,a,f){var e={},d={};function c(){var c;try{c=navigator.plugins['Shockwave Flash'];c=c.description}catch(h){try{c=(new ActiveXObject('ShockwaveFlash.ShockwaveFlash')).GetVariable('$version')}catch(i){c='0.0'}}c=c.match(/\d+/g);return parseFloat(c[0]+'.'+c[1])}a.flash={trigger:function(h,c,d){setTimeout(function(){var i=e[h],k,j;if(i){i.trigger('Flash:'+c,d)}},0)}};a.runtimes.Flash=a.addRuntime('flash',{getFeatures:function(){return {jpgresize:!0,pngresize:!0,maxWidth:8091,maxHeight:8091,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(h,l){var m,i,n=0,j=b.body;if(c()<10){l({success:!1});return}d[h.id]=!1;e[h.id]=h;m=b.getElementById(h.settings.browse_button);i=b.createElement('div');i.id=h.id+'_flash_container';a.extend(i.style,{position:'absolute',top:'0px',background:h.settings.shim_bgcolor||'transparent',zIndex:99999,width:'100%',height:'100%'});i.className='plupload flash';if(h.settings.container){j=b.getElementById(h.settings.container);if(a.getStyle(j,'position')==='static'){j.style.position='relative'}}j.appendChild(i);(function(){var c,d;c='<object id="'+h.id+'_flash" type="application/x-shockwave-flash" data="'+h.settings.flash_swf_url+'" ';if(a.ua.ie){c+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}c+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+h.settings.flash_swf_url+'" /><param name="flashvars" value="id='+escape(h.id)+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(a.ua.ie){d=b.createElement('div');i.appendChild(d);d.outerHTML=c;d=null}else {i.innerHTML=c}})();function o(){return b.getElementById(h.id+'_flash')}function k(){if(n++>5000){l({success:!1});return}if(d[h.id]===!1){setTimeout(k,1)}}k();m=i=null;h.bind('Destroy',function(c){var i;a.removeAllEvents(b.body,c.id);delete d[c.id];delete e[c.id];i=b.getElementById(c.id+'_flash_container');if(i){i.parentNode.removeChild(i)}});h.bind('Flash:Init',function(){var c={},e;try{o().setFileFilters(h.settings.filters,h.settings.multi_selection)}catch(p){l({success:!1});return}if(d[h.id]){return}d[h.id]=!0;h.bind('UploadFile',function(j,e){var d=j.settings,i=h.settings.resize||{};o().uploadFile(c[e.id],d.url,{name:e.target_name||e.name,mime:a.mimeTypes[e.name.replace(/^.+\.([^.]+)/,'$1').toLowerCase()]||'application/octet-stream',chunk_size:d.chunk_size,width:i.width,height:i.height,quality:i.quality,multipart:d.multipart,multipart_params:d.multipart_params||{},file_data_name:d.file_data_name,format:/\.(jpg|jpeg)$/i.test(e.name)?'jpg':'png',headers:d.headers,urlstream_upload:d.urlstream_upload})});h.bind('CancelUpload',function(){o().cancelUpload()});h.bind('Flash:UploadProcess',function(i,e){var d=i.getFile(c[e.id]);if(d.status!=a.FAILED){d.loaded=e.loaded;d.size=e.size;i.trigger('UploadProgress',d)}});h.bind('Flash:UploadChunkComplete',function(e,d){var j,i=e.getFile(c[d.id]);j={chunk:d.chunk,chunks:d.chunks,response:d.text};e.trigger('ChunkUploaded',i,j);if(i.status!==a.FAILED&&e.state!==a.STOPPED){o().uploadNextChunk()}if(d.chunk==d.chunks-1){i.status=a.DONE;e.trigger('FileUploaded',i,{response:d.text})}});h.bind('Flash:SelectFiles',function(m,k){var d,e,j=[],i;for(e=0;e<k.length;e++){d=k[e];i=a.guid();c[i]=d.id;c[d.id]=i;j.push(new a.File(i,d.name,d.size))}if(j.length){h.trigger('FilesAdded',j)}});h.bind('Flash:SecurityError',function(e,d){h.trigger('Error',{code:a.SECURITY_ERROR,message:a.translate('Security error.'),details:d.message,file:h.getFile(c[d.id])})});h.bind('Flash:GenericError',function(e,d){h.trigger('Error',{code:a.GENERIC_ERROR,message:a.translate('Generic error.'),details:d.message,file:h.getFile(c[d.id])})});h.bind('Flash:IOError',function(e,d){h.trigger('Error',{code:a.IO_ERROR,message:a.translate('IO error.'),details:d.message,file:h.getFile(c[d.id])})});h.bind('Flash:ImageError',function(e,d){h.trigger('Error',{code:parseInt(d.code,10),message:a.translate('Image error.'),file:h.getFile(c[d.id])})});h.bind('Flash:StageEvent:rollOver',function(e){var c,d;c=b.getElementById(h.settings.browse_button);d=e.settings.browse_button_hover;if(c&&d){a.addClass(c,d)}});h.bind('Flash:StageEvent:rollOut',function(e){var c,d;c=b.getElementById(h.settings.browse_button);d=e.settings.browse_button_hover;if(c&&d){a.removeClass(c,d)}});h.bind('Flash:StageEvent:mouseDown',function(e){var c,d;c=b.getElementById(h.settings.browse_button);d=e.settings.browse_button_active;if(c&&d){a.addClass(c,d);a.addEvent(b.body,'mouseup',function(){a.removeClass(c,d)},e.id)}});h.bind('Flash:StageEvent:mouseUp',function(e){var c,d;c=b.getElementById(h.settings.browse_button);d=e.settings.browse_button_active;if(c&&d){a.removeClass(c,d)}});h.bind('Flash:ExifData',function(e,d){h.trigger('ExifData',h.getFile(c[d.id]),d.data)});h.bind('Flash:GpsData',function(e,d){h.trigger('GpsData',h.getFile(c[d.id]),d.data)});h.bind('QueueChanged',function(c){h.refresh()});h.bind('FilesRemoved',function(i,e){var d;for(d=0;d<e.length;d++){o().removeFile(c[e[d].id])}});h.bind('StateChanged',function(c){h.refresh()});h.bind('Refresh',function(d){var c,e,i;o().setFileFilters(h.settings.filters,h.settings.multi_selection);c=b.getElementById(d.settings.browse_button);if(c){e=a.getPos(c,b.getElementById(d.settings.container));i=a.getSize(c);a.extend(b.getElementById(d.id+'_flash_container').style,{top:e.y+'px',left:e.x+'px',width:i.w+'px',height:i.h+'px'})}});h.bind('DisableBrowse',function(d,c){o().disableBrowse(c)});l({success:!0})})}})})(window,document,plupload);(function(a){a.runtimes.BrowserPlus=a.addRuntime('browserplus',{getFeatures:function(){return {dragdrop:!0,jpgresize:!0,pngresize:!0,chunks:!0,progress:!0,multipart:!0,multi_selection:!0}},init:function(d,h){var c=window.BrowserPlus,i={},g=d.settings,e=g.resize;function f(g){var j,b,f=[],c,e;for(b=0;b<g.length;b++){c=g[b];e=a.guid();i[e]=c;f.push(new a.File(e,c.name,c.size))}if(b){d.trigger('FilesAdded',f)}}function b(){var b=!1;d.bind('PostInit',function(){var e,k=g.drop_element,i=d.id+'_droptarget',j=document.getElementById(k),l;function r(e,b){c.DragAndDrop.AddDropTarget({id:e},function(g){c.DragAndDrop.AttachCallbacks({id:e,hover:function(c){if(!c&&b){b()}},drop:function(c){if(b){b()}f(c)}},function(){})})}function p(){document.getElementById(i).style.top='-1000px'}if(j){if(document.attachEvent&&/MSIE/gi.test(navigator.userAgent)){e=document.createElement('div');e.setAttribute('id',i);a.extend(e.style,{position:'absolute',top:'-1000px',background:'red',filter:'alpha(opacity=0)',opacity:0});document.body.appendChild(e);a.addEvent(j,'dragenter',function(e){var b,c;b=document.getElementById(k);c=a.getPos(b);a.extend(document.getElementById(i).style,{top:c.y+'px',left:c.x+'px',width:b.offsetWidth+'px',height:b.offsetHeight+'px'})});r(i,p)}else {r(k)}}a.addEvent(document.getElementById(g.browse_button),'click',function(n){var j=[],k,e,m=g.filters,i,l;n.preventDefault();if(b){return}o: for(k=0;k<m.length;k++){i=m[k].extensions.split(',');for(e=0;e<i.length;e++){if(i[e]==='*'){j=[];break o}l=a.mimeTypes[i[e]];if(l&&a.inArray(l,j)===-1){j.push(a.mimeTypes[i[e]])}}}c.FileBrowse.OpenBrowseDialog({mimeTypes:j},function(b){if(b.success){f(b.value)}})});j=e=null});d.bind('CancelUpload',function(){c.Uploader.cancel({},function(){})});d.bind('DisableBrowse',function(e,c){b=c});d.bind('UploadFile',function(f,b){var m=i[b.id],l={},j=f.settings.chunk_size,g,k=[];function s(e,m){var i;if(b.status==a.FAILED){return}l.name=b.target_name||b.name;if(j){l.chunk=''+e;l.chunks=''+m}i=k.shift();c.Uploader.upload({url:f.settings.url,files:{file:i},cookies:document.cookies,postvars:a.extend(l,f.settings.multipart_params),progressCallback:function(k){var c,j=0;g[e]=parseInt(k.filePercent*i.size/100,10);for(c=0;c<g.length;c++){j+=g[c]}b.loaded=j;f.trigger('UploadProgress',b)}},function(g){var c,i;if(g.success){c=g.value.statusCode;if(j){f.trigger('ChunkUploaded',b,{chunk:e,chunks:m,response:g.value.body,status:c})}if(k.length>0){s(++e,m)}else {b.status=a.DONE;f.trigger('FileUploaded',b,{response:g.value.body,status:c});if(c>=400){f.trigger('Error',{code:a.HTTP_ERROR,message:a.translate('HTTP Error.'),file:b,status:c})}}}else {f.trigger('Error',{code:a.GENERIC_ERROR,message:a.translate('Generic Error.'),file:b,details:g.error})}})}function r(e){b.size=e.size;if(j){c.FileAccess.chunk({file:e,chunkSize:j},function(j){if(j.success){var l=j.value,i=l.length;g=Array(i);for(var c=0;c<i;c++){g[c]=0;k.push(l[c])}s(0,i)}})}else {g=Array(1);k.push(e);s(0,1)}}if(e&&/\.(png|jpg|jpeg)$/i.test(b.name)){BrowserPlus.ImageAlter.transform({file:m,quality:e.quality||90,actions:[{scale:{maxwidth:e.width,maxheight:e.height}}]},function(c){if(c.success){r(c.value.file)}})}else {r(m)}});h({success:!0})}if(c){c.init(function(g){var f=[{service:'Uploader',version:'3'},{service:'DragAndDrop',version:'1'},{service:'FileBrowse',version:'1'},{service:'FileAccess',version:'2'}];if(e){f.push({service:'ImageAlter',version:'4'})}if(g.success){c.require({services:f},function(c){if(c.success){b()}else {h()}})}else {h()}})}else {h()}}})})(plupload);(function(j,g,d,k){var l={},m;function c(a){var e=a.naturalWidth,f=a.naturalHeight;if(e*f>1024*1024){var b=g.createElement('canvas');b.width=b.height=1;var c=b.getContext('2d');c.drawImage(a,-e+1,0);return c.getImageData(0,0,1,1).data[3]===0}else {return !1}}function f(n,o,b){var c=g.createElement('canvas');c.width=1;c.height=b;var f=c.getContext('2d');f.drawImage(n,0,0);var m=f.getImageData(0,0,1,b).data;var e=0;var h=b;var a=b;while(a>e){var l=m[(a-1)*4+3];if(l===0){h=a}else {e=a}a=h+e>>1}var i=a/b;return i===0?1:i}function o(l,x,u){var b=l.naturalWidth,e=l.naturalHeight;var r=u.width,p=u.height;var n=x.getContext('2d');n.save();var w=c(l);if(w){b/=2;e/=2}var a=1024;var m=g.createElement('canvas');m.width=m.height=a;var o=m.getContext('2d');var s=f(l,b,e);var h=0;while(h<e){var t=h+a>e?e-h:a;var i=0;while(i<b){var q=i+a>b?b-i:a;o.clearRect(0,0,a,a);o.drawImage(l,-i,-h);var z=i*r/b<<0;var A=Math.ceil(q*r/b);var y=h*p/e/s<<0;var v=Math.ceil(t*p/e/s);n.drawImage(m,0,0,q,t,z,y,A,v);i+=a}h+=a}n.restore();m=o=null}function p(b,c){var a;if('FileReader' in j){a=new FileReader();a.readAsDataURL(b);a.onload=function(){c(a.result)}}else {return c(b.getAsDataURL())}}function n(b,c){var a;if('FileReader' in j){a=new FileReader();a.readAsBinaryString(b);a.onload=function(){c(a.result)}}else {return c(b.getAsBinary())}}function e(n,e,f,q){var c,r,b,i,m=this;p(l[n.id],function(l){c=g.createElement('canvas');c.style.display='none';g.body.appendChild(c);b=new Image();b.onerror=b.onabort=function(){q({success:!1})};b.onload=function(){var t,s,u,p,r;if(!e.width){e.width=b.width}if(!e.height){e.height=b.height}i=Math.min(e.width/b.width,e.height/b.height);if(i<1){t=Math.round(b.width*i);s=Math.round(b.height*i)}else {if(e.quality&&f==='image/jpeg'){t=b.width;s=b.height}else {q({success:!1});return}}c.width=t;c.height=s;o(b,c,{width:t,height:s});if(f==='image/jpeg'){p=new h(atob(l.substring(l.indexOf('base64,')+7)));if(p.headers&&p.headers.length){r=new a();if(r.init(p.get('exif')[0])){r.setExif('PixelXDimension',t);r.setExif('PixelYDimension',s);p.set('exif',r.getBinary());if(m.hasEventListener('ExifData')){m.trigger('ExifData',n,r.EXIF())}if(m.hasEventListener('GpsData')){m.trigger('GpsData',n,r.GPS())}}}}if(e.quality&&f==='image/jpeg'){try{l=c.toDataURL(f,e.quality/100)}catch(v){l=c.toDataURL(f)}}else {l=c.toDataURL(f)}l=l.substring(l.indexOf('base64,')+7);l=atob(l);if(p&&p.headers&&p.headers.length){l=p.restore(l);p.purge()}c.parentNode.removeChild(c);q({success:!0,data:l})};b.src=l})}d.runtimes.Html5=d.addRuntime('html5',{getFeatures:function(){var b,c,h,f,a,e;c=h=a=e=!1;if(j.XMLHttpRequest){b=new XMLHttpRequest();h=!!b.upload;c=!!(b.sendAsBinary||b.upload)}if(c){f=!!(b.sendAsBinary||j.Uint8Array&&j.ArrayBuffer);a=!!(File&&(File.prototype.getAsDataURL||j.FileReader)&&f);e=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}m=d.ua.safari&&d.ua.windows;return {html5:c,dragdrop:function(){var a=g.createElement('div');return 'draggable' in a||'ondragstart' in a&&'ondrop' in a}(),jpgresize:a,pngresize:a,multipart:a||!!j.FileReader||!!j.FormData,canSendBinary:f,cantSendBlobInFormData:!!(d.ua.gecko&&j.FormData&&j.FileReader&&!FileReader.prototype.readAsArrayBuffer)||d.ua.android,progress:h,chunks:e,multi_selection:!(d.ua.safari&&d.ua.windows),triggerDialog:d.ua.gecko&&j.FormData||d.ua.webkit}},init:function(a,f){var c,b;function r(m){var b,c,h=[],e,i={};for(c=0;c<m.length;c++){b=m[c];if(i[b.name]&&d.ua.safari&&d.ua.windows){continue}i[b.name]=!0;e=d.guid();l[e]=b;h.push(new d.File(e,b.fileName||b.name,b.fileSize||b.size))}if(h.length){a.trigger('FilesAdded',h)}}c=this.getFeatures();if(!c.html5){f({success:!1});return}a.bind('Init',function(b){var e,c,l=[],p,h,u=b.settings.filters,o,i,n=g.body,m;e=g.createElement('div');e.id=b.id+'_html5_container';d.extend(e.style,{position:'absolute',background:a.settings.shim_bgcolor||'transparent',width:'100px',height:'100px',overflow:'hidden',zIndex:99999,opacity:a.settings.shim_bgcolor?'':0});e.className='plupload html5';if(a.settings.container){n=g.getElementById(a.settings.container);if(d.getStyle(n,'position')==='static'){n.style.position='relative'}}n.appendChild(e);v: for(p=0;p<u.length;p++){o=u[p].extensions.split(/,/);for(h=0;h<o.length;h++){if(o[h]==='*'){l=[];break v}i=d.mimeTypes[o[h]];if(i&&d.inArray(i,l)===-1){l.push(i)}}}e.innerHTML='<input id="'+a.id+'_html5"  style="font-size:999px" type="file" accept="'+l.join(',')+'" '+(a.settings.multi_selection&&a.features.multi_selection?'multiple="multiple"':'')+' />';e.scrollTop=100;m=g.getElementById(a.id+'_html5');if(b.features.triggerDialog){d.extend(m.style,{position:'absolute',width:'100%',height:'100%'})}else {d.extend(m.style,{cssFloat:'right',styleFloat:'right'})}m.onchange=function(){r(this.files);this.value=''};c=g.getElementById(b.settings.browse_button);if(c){var s=b.settings.browse_button_hover,t=b.settings.browse_button_active,q=b.features.triggerDialog?c:e;if(s){d.addEvent(q,'mouseover',function(){d.addClass(c,s)},b.id);d.addEvent(q,'mouseout',function(){d.removeClass(c,s)},b.id)}if(t){d.addEvent(q,'mousedown',function(){d.addClass(c,t)},b.id);d.addEvent(g.body,'mouseup',function(){d.removeClass(c,t)},b.id)}if(b.features.triggerDialog){d.addEvent(c,'click',function(e){var c=g.getElementById(b.id+'_html5');if(c&&!c.disabled){c.click()}e.preventDefault()},b.id)}}});a.bind('PostInit',function(){var b=g.getElementById(a.settings.drop_element);if(b){if(m){d.addEvent(b,'dragenter',function(i){var c,h,e;c=g.getElementById(a.id+'_drop');if(!c){c=g.createElement('input');c.setAttribute('type','file');c.setAttribute('id',a.id+'_drop');c.setAttribute('multiple','multiple');d.addEvent(c,'change',function(){r(this.files);d.removeEvent(c,'change',a.id);c.parentNode.removeChild(c)},a.id);d.addEvent(c,'dragover',function(b){b.stopPropagation()},a.id);b.appendChild(c)}h=d.getPos(b,g.getElementById(a.settings.container));e=d.getSize(b);if(d.getStyle(b,'position')==='static'){d.extend(b.style,{position:'relative'})}d.extend(c.style,{position:'absolute',display:'block',top:0,left:0,width:e.w+'px',height:e.h+'px',opacity:0})},a.id);return}d.addEvent(b,'dragover',function(b){b.preventDefault()},a.id);d.addEvent(b,'drop',function(c){var b=c.dataTransfer;if(b&&b.files){r(b.files)}c.preventDefault()},a.id)}});a.bind('Refresh',function(l){var b,h,i,e,c;b=g.getElementById(a.settings.browse_button);if(b){h=d.getPos(b,g.getElementById(l.settings.container));i=d.getSize(b);e=g.getElementById(a.id+'_html5_container');d.extend(e.style,{top:h.y+'px',left:h.x+'px',width:i.w+'px',height:i.h+'px'});if(a.features.triggerDialog){if(d.getStyle(b,'position')==='static'){d.extend(b.style,{position:'relative'})}c=parseInt(d.getStyle(b,'zIndex'),10);if(isNaN(c)){c=0}d.extend(b.style,{zIndex:c});d.extend(e.style,{zIndex:c-1})}}});a.bind('DisableBrowse',function(c,e){var b=g.getElementById(c.id+'_html5');if(b){b.disabled=e}});a.bind('CancelUpload',function(){if(b&&b.abort){b.abort()}});a.bind('UploadFile',function(i,h){var o=i.settings,m,p;function A(b,c,e){var l;if(File.prototype.slice){try{b.slice();return b.slice(c,e)}catch(q){return b.slice(c,e-c)}}else {if(l=File.prototype.webkitSlice||File.prototype.mozSlice){return l.call(b,c,e)}else {return null}}}function z(l){var e=0,m=0;function D(){var p,v,r,q,n,s,u,t=i.settings.url;function J(e){if(b.sendAsBinary){b.sendAsBinary(e)}else {if(i.features.canSendBinary){var m=new Uint8Array(e.length);for(var c=0;c<e.length;c++){m[c]=e.charCodeAt(c)&255}b.send(m.buffer)}}}function I(o){var A=0,z='----pluploadboundary'+d.guid(),x,y='--',v='\r\n',w='';b=new XMLHttpRequest();if(b.upload){b.upload.onprogress=function(b){h.loaded=Math.min(h.size,m+b.loaded-A);i.trigger('UploadProgress',h)}}b.onreadystatechange=function(){var c,q;if(b.readyState==4&&i.state!==d.STOPPED){try{c=b.status}catch(B){c=0}if(c>=400){i.trigger('Error',{code:d.HTTP_ERROR,message:d.translate('HTTP Error.'),file:h,status:c})}else {if(r){q={chunk:e,chunks:r,response:b.responseText,status:c};i.trigger('ChunkUploaded',h,q);m+=s;if(q.cancelled){h.status=d.FAILED;return}h.loaded=Math.min(h.size,(e+1)*n)}else {h.loaded=h.size}i.trigger('UploadProgress',h);o=p=x=w=null;if(!r||++e>=r){h.status=d.DONE;i.trigger('FileUploaded',h,{response:b.responseText,status:c})}else {D()}}}};if(i.settings.multipart&&c.multipart){q.name=h.target_name||h.name;b.open('post',t,!0);d.each(i.settings.headers,function(e,c){b.setRequestHeader(c,e)});if(typeof o!=='string'&&!!j.FormData){x=new FormData();d.each(d.extend(q,i.settings.multipart_params),function(c,b){x.append(b,c)});x.append(i.settings.file_data_name,o);b.send(x);return}if(typeof o==='string'){b.setRequestHeader('Content-Type','multipart/form-data; boundary='+z);d.each(d.extend(q,i.settings.multipart_params),function(c,b){w+=y+z+v+'Content-Disposition: form-data; name="'+b+'"'+v+v;w+=unescape(encodeURIComponent(c))+v});u=d.mimeTypes[h.name.replace(/^.+\.([^.]+)/,'$1').toLowerCase()]||'application/octet-stream';w+=y+z+v+'Content-Disposition: form-data; name="'+i.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(h.name))+'"'+v+'Content-Type: '+u+v+v+o+v+y+z+y+v;A=w.length-o.length;o=w;J(o);return}}t=d.buildUrl(i.settings.url,d.extend(q,i.settings.multipart_params));b.open('post',t,!0);b.setRequestHeader('Content-Type','application/octet-stream');d.each(i.settings.headers,function(e,c){b.setRequestHeader(c,e)});if(typeof o==='string'){J(o)}else {b.send(o)}}if(h.status==d.DONE||h.status==d.FAILED||i.state==d.STOPPED){return}q={name:h.target_name||h.name};if(o.chunk_size&&h.size>o.chunk_size&&(c.chunks||typeof l=='string')){n=o.chunk_size;r=Math.ceil(h.size/n);s=Math.min(n,h.size-e*n);if(typeof l=='string'){p=l.substring(e*n,e*n+s)}else {p=A(l,e*n,e*n+s)}q.chunk=e;q.chunks=r}else {s=h.size;p=l}if(i.settings.multipart&&c.multipart&&typeof p!=='string'&&j.FileReader&&c.cantSendBlobInFormData&&c.chunks&&i.settings.chunk_size){(function(){var b=new FileReader();b.onload=function(){I(b.result);b=null};b.readAsBinaryString(p)})()}else {I(p)}}D()}m=l[h.id];if(c.jpgresize&&i.settings.resize&&/\.(png|jpg|jpeg)$/i.test(h.name)){e.call(i,h,i.settings.resize,/\.png$/i.test(h.name)?'image/png':'image/jpeg',function(b){if(b.success){h.size=b.data.length;z(b.data)}else {if(c.chunks){z(m)}else {n(m,z)}}})}else {if(!c.chunks&&c.jpgresize){n(m,z)}else {z(m)}}});a.bind('Destroy',function(b){var i,c,h=g.body,e={inputContainer:b.id+'_html5_container',inputFile:b.id+'_html5',browseButton:b.settings.browse_button,dropElm:b.settings.drop_element};for(i in e){c=g.getElementById(e[i]);if(c){d.removeAllEvents(c,b.id)}}d.removeAllEvents(g.body,b.id);if(b.settings.container){h=g.getElementById(b.settings.container)}h.removeChild(g.getElementById(e.inputContainer))});f({success:!0})}});function b(){var b=!1,a;function u(i,e){var h=b?0:-8*(e-1),f=0,c;for(c=0;c<e;c++){f|=a.charCodeAt(i+c)<<Math.abs(h+c*8)}return f}function q(e,b,c){var c=arguments.length===3?c:a.length-b-1;a=a.substr(0,b)+e+a.substr(c+b)}function s(h,i,c){var e='',f=b?0:-8*(c-1),a;for(a=0;a<c;a++){e+=String.fromCharCode(i>>Math.abs(f+a*8)&255)}q(e,h,c)}return {II:function(a){if(a===k){return b}else {b=a}},init:function(c){b=!1;a=c},SEGMENT:function(b,c,e){switch(arguments.length){case 1:return a.substr(b,a.length-b-1);case 2:return a.substr(b,c);case 3:q(e,b,c);break;default:return a;}},BYTE:function(a){return u(a,1)},SHORT:function(a){return u(a,2)},LONG:function(a,b){if(b===k){return u(a,4)}else {s(a,b,4)}},SLONG:function(b){var a=u(b,4);return a>2147483647?a-4.294967296E9:a},STRING:function(a,b){var c='';for(b+=a;a<b;a++){c+=String.fromCharCode(u(a,1))}return c}}}function h(n){var i={65505:{app:'EXIF',name:'APP1',signature:'Exif\x00'},65506:{app:'ICC',name:'APP2',signature:'ICC_PROFILE\x00'},65517:{app:'IPTC',name:'APP13',signature:'Photoshop 3.0\x00'}},c=[],a,e,f=k,l=0,m;a=new b();a.init(n);if(a.SHORT(0)!==65496){return}e=2;m=Math.min(1048576,n.length);while(e<=m){f=a.SHORT(e);if(f>=65488&&f<=65495){e+=2;continue}if(f===65498||f===65497){break}l=a.SHORT(e+2)+2;if(i[f]&&a.STRING(e+4,i[f].signature.length)===i[f].signature){c.push({hex:f,app:i[f].app.toUpperCase(),name:i[f].name.toUpperCase(),start:e,length:l,segment:a.SEGMENT(e,l)})}e+=l}a.init(null);return {headers:c,restore:function(i){a.init(i);var f=new h(i);if(!f.headers){return !1}for(var b=f.headers.length;b>0;b--){var l=f.headers[b-1];a.SEGMENT(l.start,l.length,'')}f.purge();e=a.SHORT(2)==65504?4+a.SHORT(4):2;for(var b=0,m=c.length;b<m;b++){a.SEGMENT(e,0,c[b].segment);e+=c[b].length}return a.SEGMENT()},get:function(e){var b=[];for(var a=0,f=c.length;a<f;a++){if(c[a].app===e.toUpperCase()){b.push(c[a].segment)}}return b},set:function(f,e){var a=[];if(typeof e==='string'){a.push(e)}else {a=e}for(var b=ii=0,h=c.length;b<h;b++){if(c[b].app===f.toUpperCase()){c[b].segment=a[ii];c[b].length=a[ii].length;ii++}if(ii>=a.length){break}}},purge:function(){c=[];a.init(null)}}}function a(){var a,e,c={},f;a=new b();e={tiff:{274:'Orientation',34665:'ExifIFDPointer',34853:'GPSInfoIFDPointer'},exif:{36864:'ExifVersion',40961:'ColorSpace',40962:'PixelXDimension',40963:'PixelYDimension',36867:'DateTimeOriginal',33434:'ExposureTime',33437:'FNumber',34855:'ISOSpeedRatings',37377:'ShutterSpeedValue',37378:'ApertureValue',37383:'MeteringMode',37384:'LightSource',37385:'Flash',41986:'ExposureMode',41987:'WhiteBalance',41990:'SceneCaptureType',41988:'DigitalZoomRatio',41992:'Contrast',41993:'Saturation',41994:'Sharpness'},gps:{0:'GPSVersionID',1:'GPSLatitudeRef',2:'GPSLatitude',3:'GPSLongitudeRef',4:'GPSLongitude'}};f={ColorSpace:{1:'sRGB',0:'Uncalibrated'},MeteringMode:{0:'Unknown',1:'Average',2:'CenterWeightedAverage',3:'Spot',4:'MultiSpot',5:'Pattern',6:'Partial',255:'Other'},LightSource:{1:'Daylight',2:'Fliorescent',3:'Tungsten',4:'Flash',9:'Fine weather',10:'Cloudy weather',11:'Shade',12:'Daylight fluorescent (D 5700 - 7100K)',13:'Day white fluorescent (N 4600 -5400K)',14:'Cool white fluorescent (W 3900 - 4500K)',15:'White fluorescent (WW 3200 - 3700K)',17:'Standard light A',18:'Standard light B',19:'Standard light C',20:'D55',21:'D65',22:'D75',23:'D50',24:'ISO studio tungsten',255:'Other'},Flash:{0:'Flash did not fire.',1:'Flash fired.',5:'Strobe return light not detected.',7:'Strobe return light detected.',9:'Flash fired, compulsory flash mode',13:'Flash fired, compulsory flash mode, return light not detected',15:'Flash fired, compulsory flash mode, return light detected',16:'Flash did not fire, compulsory flash mode',24:'Flash did not fire, auto mode',25:'Flash fired, auto mode',29:'Flash fired, auto mode, return light not detected',31:'Flash fired, auto mode, return light detected',32:'No flash function',65:'Flash fired, red-eye reduction mode',69:'Flash fired, red-eye reduction mode, return light not detected',71:'Flash fired, red-eye reduction mode, return light detected',73:'Flash fired, compulsory flash mode, red-eye reduction mode',77:'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',79:'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',89:'Flash fired, auto mode, red-eye reduction mode',93:'Flash fired, auto mode, return light not detected, red-eye reduction mode',95:'Flash fired, auto mode, return light detected, red-eye reduction mode'},ExposureMode:{0:'Auto exposure',1:'Manual exposure',2:'Auto bracket'},WhiteBalance:{0:'Auto white balance',1:'Manual white balance'},SceneCaptureType:{0:'Standard',1:'Landscape',2:'Portrait',3:'Night scene'},Contrast:{0:'Normal',1:'Soft',2:'Hard'},Saturation:{0:'Normal',1:'Low saturation',2:'High saturation'},Sharpness:{0:'Normal',1:'Soft',2:'Hard'},GPSLatitudeRef:{N:'North latitude',S:'South latitude'},GPSLongitudeRef:{E:'East longitude',W:'West longitude'}};function s(q,r){var t=a.SHORT(q),n,b,l,p,h,s,e,o,i=[],m={};for(n=0;n<t;n++){e=s=q+12*n+2;l=r[a.SHORT(e)];if(l===k){continue}p=a.SHORT(e+=2);h=a.LONG(e+=2);e+=4;i=[];switch(p){case 1:case 7:if(h>4){e=a.LONG(e)+c.tiffHeader};for(b=0;b<h;b++){i[b]=a.BYTE(e+b)};break;case 2:if(h>4){e=a.LONG(e)+c.tiffHeader};m[l]=a.STRING(e,h-1);continue;case 3:if(h>2){e=a.LONG(e)+c.tiffHeader};for(b=0;b<h;b++){i[b]=a.SHORT(e+b*2)};break;case 4:if(h>1){e=a.LONG(e)+c.tiffHeader};for(b=0;b<h;b++){i[b]=a.LONG(e+b*4)};break;case 5:e=a.LONG(e)+c.tiffHeader;for(b=0;b<h;b++){i[b]=a.LONG(e+b*4)/a.LONG(e+b*4+4)};break;case 9:e=a.LONG(e)+c.tiffHeader;for(b=0;b<h;b++){i[b]=a.SLONG(e+b*4)};break;case 10:e=a.LONG(e)+c.tiffHeader;for(b=0;b<h;b++){i[b]=a.SLONG(e+b*4)/a.SLONG(e+b*4+4)};break;default:continue;}o=h==1?i[0]:i;if(f.hasOwnProperty(l)&&typeof o!='object'){m[l]=f[l][o]}else {m[l]=o}}return m}function v(){var b=k,f=c.tiffHeader;a.II(a.SHORT(f)==18761);if(a.SHORT(f+=2)!==42){return !1}c.IFD0=c.tiffHeader+a.LONG(f+=2);b=s(c.IFD0,e.tiff);c.exifIFD='ExifIFDPointer' in b?c.tiffHeader+b.ExifIFDPointer:k;c.gpsIFD='GPSInfoIFDPointer' in b?c.tiffHeader+b.GPSInfoIFDPointer:k;return !0}function u(o,b,p){var l,m,f,h=0;if(typeof b==='string'){var n=e[o.toLowerCase()];for(hex in n){if(n[hex]===b){b=hex;break}}}l=c[o.toLowerCase()+'IFD'];m=a.SHORT(l);for(i=0;i<m;i++){f=l+12*i+2;if(a.SHORT(f)==b){h=f+8;break}}if(!h){return !1}a.LONG(h,p);return !0}return {init:function(b){c={tiffHeader:10};if(b===k||!b.length){return !1}a.init(b);if(a.SHORT(0)===65505&&a.STRING(4,5).toUpperCase()==='EXIF\x00'){return v()}return !1},EXIF:function(){var a;a=s(c.exifIFD,e.exif);if(a.ExifVersion&&d.typeOf(a.ExifVersion)==='array'){for(var b=0,f='';b<a.ExifVersion.length;b++){f+=String.fromCharCode(a.ExifVersion[b])}a.ExifVersion=f}return a},GPS:function(){var a;a=s(c.gpsIFD,e.gps);if(a.GPSVersionID){a.GPSVersionID=a.GPSVersionID.join('.')}return a},setExif:function(a,b){if(a!=='PixelXDimension'&&a!=='PixelYDimension'){return !1}return u('exif',a,b)},getBinary:function(){return a.SEGMENT()}}}})(window,document,plupload);(function(c,b,a,d){function e(e){return b.getElementById(e)}a.runtimes.Html4=a.addRuntime('html4',{getFeatures:function(){return {multipart:!0,triggerDialog:a.ua.gecko&&c.FormData||a.ua.webkit}},init:function(f,g){f.bind('Init',function(h){var m=b.body,k,t='javascript',j,x,i,s=[],w=/MSIE/.test(navigator.userAgent),l=[],r=h.settings.filters,p,o,q,n;y: for(p=0;p<r.length;p++){o=r[p].extensions.split(/,/);for(n=0;n<o.length;n++){if(o[n]==='*'){l=[];break y}q=a.mimeTypes[o[n]];if(q&&a.inArray(q,l)===-1){l.push(q)}}}l=l.join(',');function v(){var k,j,o,n;i=a.guid();s.push(i);k=b.createElement('form');k.setAttribute('id','form_'+i);k.setAttribute('method','post');k.setAttribute('enctype','multipart/form-data');k.setAttribute('encoding','multipart/form-data');k.setAttribute('target',h.id+'_iframe');k.style.position='absolute';j=b.createElement('input');j.setAttribute('id','input_'+i);j.setAttribute('type','file');j.setAttribute('accept',l);j.setAttribute('size',1);n=e(h.settings.browse_button);if(h.features.triggerDialog&&n){a.addEvent(e(h.settings.browse_button),'click',function(e){if(!j.disabled){j.click()}e.preventDefault()},h.id)}a.extend(j.style,{width:'100%',height:'100%',opacity:0,fontSize:'99px',cursor:'pointer'});a.extend(k.style,{overflow:'hidden'});o=h.settings.shim_bgcolor;if(o){k.style.background=o}if(w){a.extend(j.style,{filter:'alpha(opacity=0)'})}a.addEvent(j,'change',function(p){var o=p.target,l,m=[],q;if(o.value){e('form_'+i).style.top=-1048575+'px';l=o.value.replace(/\\/g,'/');l=l.substring(l.length,l.lastIndexOf('/')+1);m.push(new a.File(i,l));if(!h.features.triggerDialog){a.removeAllEvents(k,h.id)}else {a.removeEvent(n,'click',h.id)}a.removeEvent(j,'change',h.id);v();if(m.length){f.trigger('FilesAdded',m)}}},h.id);k.appendChild(j);m.appendChild(k);h.refresh()}function u(){var e=b.createElement('div');e.innerHTML='<iframe id="'+h.id+'_iframe" name="'+h.id+'_iframe" src="'+t+':&quot;&quot;" style="display:none"></iframe>';k=e.firstChild;m.appendChild(k);a.addEvent(k,'load',function(l){var k=l.target,i,e;if(!j){return}try{i=k.contentWindow.document||k.contentDocument||c.frames[k.id].document}catch(z){h.trigger('Error',{code:a.SECURITY_ERROR,message:a.translate('Security error.'),file:j});return}e=i.documentElement.innerText||i.documentElement.textContent;if(e){j.status=a.DONE;j.loaded=1025;j.percent=100;h.trigger('UploadProgress',j);h.trigger('FileUploaded',j,{response:e})}},h.id)}if(h.settings.container){m=e(h.settings.container);if(a.getStyle(m,'position')==='static'){m.style.position='relative'}}h.bind('UploadFile',function(m,k){var l,n;if(k.status==a.DONE||k.status==a.FAILED||m.state==a.STOPPED){return}l=e('form_'+k.id);n=e('input_'+k.id);n.setAttribute('name',m.settings.file_data_name);l.setAttribute('action',m.settings.url);a.each(a.extend({name:k.target_name||k.name},m.settings.multipart_params),function(j,i){var e=b.createElement('input');a.extend(e,{type:'hidden',name:i,value:j});l.insertBefore(e,l.firstChild)});j=k;e('form_'+i).style.top=-1048575+'px';l.submit()});h.bind('FileUploaded',function(e){e.refresh()});h.bind('StateChanged',function(i){if(i.state==a.STARTED){u()}else {if(i.state==a.STOPPED){c.setTimeout(function(){a.removeEvent(k,'load',i.id);if(k.parentNode){k.parentNode.removeChild(k)}},0)}}a.each(i.files,function(j,l){if(j.status===a.DONE||j.status===a.FAILED){var k=e('form_'+j.id);if(k){k.parentNode.removeChild(k)}}})});h.bind('Refresh',function(k){var j,m,n,o,r,q,p,s,l;j=e(k.settings.browse_button);if(j){r=a.getPos(j,e(k.settings.container));q=a.getSize(j);p=e('form_'+i);s=e('input_'+i);a.extend(p.style,{top:r.y+'px',left:r.x+'px',width:q.w+'px',height:q.h+'px'});if(k.features.triggerDialog){if(a.getStyle(j,'position')==='static'){a.extend(j.style,{position:'relative'})}l=parseInt(j.style.zIndex,10);if(isNaN(l)){l=0}a.extend(j.style,{zIndex:l});a.extend(p.style,{zIndex:l-1})}n=k.settings.browse_button_hover;o=k.settings.browse_button_active;m=k.features.triggerDialog?j:p;if(n){a.addEvent(m,'mouseover',function(){a.addClass(j,n)},k.id);a.addEvent(m,'mouseout',function(){a.removeClass(j,n)},k.id)}if(o){a.addEvent(m,'mousedown',function(){a.addClass(j,o)},k.id);a.addEvent(b.body,'mouseup',function(){a.removeClass(j,o)},k.id)}}});f.bind('FilesRemoved',function(l,k){var i,j;for(i=0;i<k.length;i++){j=e('form_'+k[i].id);if(j){j.parentNode.removeChild(j)}}});f.bind('DisableBrowse',function(k,j){var e=b.getElementById('input_'+i);if(e){e.disabled=j}});f.bind('Destroy',function(l){var m,k,j,n={inputContainer:'form_'+i,inputFile:'input_'+i,browseButton:l.settings.browse_button};for(m in n){k=e(n[m]);if(k){a.removeAllEvents(k,l.id)}}a.removeAllEvents(b.body,l.id);a.each(s,function(i,k){j=e('form_'+i);if(j){j.parentNode.removeChild(j)}})});v()});g({success:!0})}})})(window,document,plupload);